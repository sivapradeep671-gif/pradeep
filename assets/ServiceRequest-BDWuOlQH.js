import{R as P,a as _t,r as He,j as h,m as Vt,S as Ft}from"./index-CVOoTMyE.js";import{C as At}from"./circle-check-big-BnXWwQtn.js";import{C as kt}from"./circle-alert-D9kpPFLR.js";var be=e=>e.type==="checkbox",se=e=>e instanceof Date,I=e=>e==null;const it=e=>typeof e=="object";var E=e=>!I(e)&&!Array.isArray(e)&&it(e)&&!se(e),Dt=e=>E(e)&&e.target?be(e.target)?e.target.checked:e.target.value:e,St=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,pt=(e,s)=>e.has(St(s)),Et=e=>{const s=e.constructor&&e.constructor.prototype;return E(s)&&s.hasOwnProperty("isPrototypeOf")},Ee=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function T(e){if(e instanceof Date)return new Date(e);const s=typeof FileList<"u"&&e instanceof FileList;if(Ee&&(e instanceof Blob||s))return e;const r=Array.isArray(e);if(!r&&!(E(e)&&Et(e)))return e;const l=r?[]:Object.create(Object.getPrototypeOf(e));for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(l[o]=T(e[o]));return l}var we=e=>/^\w*$/.test(e),S=e=>e===void 0,Ne=e=>Array.isArray(e)?e.filter(Boolean):[],Ce=e=>Ne(e.replace(/["|']|\]/g,"").split(/\.|\[/)),b=(e,s,r)=>{if(!s||!E(e))return r;const l=(we(s)?[s]:Ce(s)).reduce((o,n)=>I(o)?o:o[n],e);return S(l)||l===e?S(e[s])?r:e[s]:l},Y=e=>typeof e=="boolean",K=e=>typeof e=="function",k=(e,s,r)=>{let l=-1;const o=we(s)?[s]:Ce(s),n=o.length,c=n-1;for(;++l<n;){const f=o[l];let O=r;if(l!==c){const M=e[f];O=E(M)||Array.isArray(M)?M:isNaN(+o[l+1])?{}:[]}if(f==="__proto__"||f==="constructor"||f==="prototype")return;e[f]=O,e=e[f]}};const ze={BLUR:"blur",FOCUS_OUT:"focusout"},G={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Z={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Nt=P.createContext(null);Nt.displayName="HookFormContext";var Ct=(e,s,r,l=!0)=>{const o={defaultValues:s._defaultValues};for(const n in e)Object.defineProperty(o,n,{get:()=>{const c=n;return s._proxyFormState[c]!==G.all&&(s._proxyFormState[c]=!l||G.all),e[c]}});return o};const Tt=typeof window<"u"?P.useLayoutEffect:P.useEffect;var q=e=>typeof e=="string",Ot=(e,s,r,l,o)=>q(e)?(l&&s.watch.add(e),b(r,e,o)):Array.isArray(e)?e.map(n=>(l&&s.watch.add(n),b(r,n))):(l&&(s.watchAll=!0),r),Se=e=>I(e)||!it(e);function te(e,s,r=new WeakSet){if(Se(e)||Se(s))return Object.is(e,s);if(se(e)&&se(s))return e.getTime()===s.getTime();const l=Object.keys(e),o=Object.keys(s);if(l.length!==o.length)return!1;if(r.has(e)||r.has(s))return!0;r.add(e),r.add(s);for(const n of l){const c=e[n];if(!o.includes(n))return!1;if(n!=="ref"){const f=s[n];if(se(c)&&se(f)||E(c)&&E(f)||Array.isArray(c)&&Array.isArray(f)?!te(c,f,r):!Object.is(c,f))return!1}}return!0}var Rt=(e,s,r,l,o)=>s?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[l]:o||!0}}:{},fe=e=>Array.isArray(e)?e:[e],Ke=()=>{let e=[];return{get observers(){return e},next:o=>{for(const n of e)n.next&&n.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(n=>n!==o)}}),unsubscribe:()=>{e=[]}}};function lt(e,s){const r={};for(const l in e)if(e.hasOwnProperty(l)){const o=e[l],n=s[l];if(o&&E(o)&&n){const c=lt(o,n);E(c)&&(r[l]=c)}else e[l]&&(r[l]=n)}return r}var j=e=>E(e)&&!Object.keys(e).length,Te=e=>e.type==="file",me=e=>{if(!Ee)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},at=e=>e.type==="select-multiple",Oe=e=>e.type==="radio",jt=e=>Oe(e)||be(e),De=e=>me(e)&&e.isConnected;function It(e,s){const r=s.slice(0,-1).length;let l=0;for(;l<r;)e=S(e)?l++:e[s[l++]];return e}function Lt(e){for(const s in e)if(e.hasOwnProperty(s)&&!S(e[s]))return!1;return!0}function p(e,s){const r=Array.isArray(s)?s:we(s)?[s]:Ce(s),l=r.length===1?e:It(e,r),o=r.length-1,n=r[o];return l&&delete l[n],o!==0&&(E(l)&&j(l)||Array.isArray(l)&&Lt(l))&&p(e,r.slice(0,-1)),e}var Ut=e=>{for(const s in e)if(K(e[s]))return!0;return!1};function nt(e){return Array.isArray(e)||E(e)&&!Ut(e)}function pe(e,s={}){for(const r in e){const l=e[r];nt(l)?(s[r]=Array.isArray(l)?[]:{},pe(l,s[r])):S(l)||(s[r]=!0)}return s}function ae(e,s,r){r||(r=pe(s));for(const l in e){const o=e[l];if(nt(o))S(s)||Se(r[l])?r[l]=pe(o,Array.isArray(o)?[]:{}):ae(o,I(s)?{}:s[l],r[l]);else{const n=s[l];r[l]=!te(o,n)}}return r}const Ge={value:!1,isValid:!1},Ye={value:!0,isValid:!0};var ot=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!S(e[0].attributes.value)?S(e[0].value)||e[0].value===""?Ye:{value:e[0].value,isValid:!0}:Ye:Ge}return Ge},ut=(e,{valueAsNumber:s,valueAsDate:r,setValueAs:l})=>S(e)?e:s?e===""?NaN:e&&+e:r&&q(e)?new Date(e):l?l(e):e;const Je={isValid:!1,value:null};var ct=e=>Array.isArray(e)?e.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,Je):Je;function Qe(e){const s=e.ref;return Te(s)?s.files:Oe(s)?ct(e.refs).value:at(s)?[...s.selectedOptions].map(({value:r})=>r):be(s)?ot(e.refs).value:ut(S(s.value)?e.ref.value:s.value,e)}var Pt=(e,s,r,l)=>{const o={};for(const n of e){const c=b(s,n);c&&k(o,n,c._f)}return{criteriaMode:r,names:[...e],fields:o,shouldUseNativeValidation:l}},ve=e=>e instanceof RegExp,de=e=>S(e)?e:ve(e)?e.source:E(e)?ve(e.value)?e.value.source:e.value:e,Xe=e=>({isOnSubmit:!e||e===G.onSubmit,isOnBlur:e===G.onBlur,isOnChange:e===G.onChange,isOnAll:e===G.all,isOnTouch:e===G.onTouched});const Ze="AsyncFunction";var qt=e=>!!e&&!!e.validate&&!!(K(e.validate)&&e.validate.constructor.name===Ze||E(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===Ze)),Mt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),et=(e,s,r)=>!r&&(s.watchAll||s.watch.has(e)||[...s.watch].some(l=>e.startsWith(l)&&/^\.\w+/.test(e.slice(l.length))));const ye=(e,s,r,l)=>{for(const o of r||Object.keys(e)){const n=b(e,o);if(n){const{_f:c,...f}=n;if(c){if(c.refs&&c.refs[0]&&s(c.refs[0],o)&&!l)return!0;if(c.ref&&s(c.ref,c.name)&&!l)return!0;if(ye(f,s))break}else if(E(f)&&ye(f,s))break}}};function tt(e,s,r){const l=b(e,r);if(l||we(r))return{error:l,name:r};const o=r.split(".");for(;o.length;){const n=o.join("."),c=b(s,n),f=b(e,n);if(c&&!Array.isArray(c)&&r!==n)return{name:r};if(f&&f.type)return{name:n,error:f};if(f&&f.root&&f.root.type)return{name:`${n}.root`,error:f.root};o.pop()}return{name:r}}var $t=(e,s,r,l)=>{r(e);const{name:o,...n}=e;return j(n)||Object.keys(n).length>=Object.keys(s).length||Object.keys(n).find(c=>s[c]===(!l||G.all))},Bt=(e,s,r)=>!e||!s||e===s||fe(e).some(l=>l&&(r?l===s:l.startsWith(s)||s.startsWith(l))),Wt=(e,s,r,l,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(s||e):(r?l.isOnBlur:o.isOnBlur)?!e:(r?l.isOnChange:o.isOnChange)?e:!0,Ht=(e,s)=>!Ne(b(e,s)).length&&p(e,s),zt=(e,s,r)=>{const l=fe(b(e,r));return k(l,"root",s[r]),k(e,r,l),e};function rt(e,s,r="validate"){if(q(e)||Array.isArray(e)&&e.every(q)||Y(e)&&!e)return{type:r,message:q(e)?e:"",ref:s}}var le=e=>E(e)&&!ve(e)?e:{value:e,message:""},st=async(e,s,r,l,o,n)=>{const{ref:c,refs:f,required:O,maxLength:M,minLength:D,min:V,max:F,pattern:x,validate:$,name:L,valueAsNumber:J,mount:B}=e._f,v=b(r,L);if(!B||s.has(L))return{};const Q=f?f[0]:c,X=m=>{o&&Q.reportValidity&&(Q.setCustomValidity(Y(m)?"":m||""),Q.reportValidity())},N={},ne=Oe(c),ge=be(c),re=ne||ge,ie=(J||Te(c))&&S(c.value)&&S(v)||me(c)&&c.value===""||v===""||Array.isArray(v)&&!v.length,W=Rt.bind(null,L,l,N),he=(m,w,C,R=Z.maxLength,z=Z.minLength)=>{const U=m?w:C;N[L]={type:m?R:z,message:U,ref:c,...W(m?R:z,U)}};if(n?!Array.isArray(v)||!v.length:O&&(!re&&(ie||I(v))||Y(v)&&!v||ge&&!ot(f).isValid||ne&&!ct(f).isValid)){const{value:m,message:w}=q(O)?{value:!!O,message:O}:le(O);if(m&&(N[L]={type:Z.required,message:w,ref:Q,...W(Z.required,w)},!l))return X(w),N}if(!ie&&(!I(V)||!I(F))){let m,w;const C=le(F),R=le(V);if(!I(v)&&!isNaN(v)){const z=c.valueAsNumber||v&&+v;I(C.value)||(m=z>C.value),I(R.value)||(w=z<R.value)}else{const z=c.valueAsDate||new Date(v),U=ce=>new Date(new Date().toDateString()+" "+ce),oe=c.type=="time",ue=c.type=="week";q(C.value)&&v&&(m=oe?U(v)>U(C.value):ue?v>C.value:z>new Date(C.value)),q(R.value)&&v&&(w=oe?U(v)<U(R.value):ue?v<R.value:z<new Date(R.value))}if((m||w)&&(he(!!m,C.message,R.message,Z.max,Z.min),!l))return X(N[L].message),N}if((M||D)&&!ie&&(q(v)||n&&Array.isArray(v))){const m=le(M),w=le(D),C=!I(m.value)&&v.length>+m.value,R=!I(w.value)&&v.length<+w.value;if((C||R)&&(he(C,m.message,w.message),!l))return X(N[L].message),N}if(x&&!ie&&q(v)){const{value:m,message:w}=le(x);if(ve(m)&&!v.match(m)&&(N[L]={type:Z.pattern,message:w,ref:c,...W(Z.pattern,w)},!l))return X(w),N}if($){if(K($)){const m=await $(v,r),w=rt(m,Q);if(w&&(N[L]={...w,...W(Z.validate,w.message)},!l))return X(w.message),N}else if(E($)){let m={};for(const w in $){if(!j(m)&&!l)break;const C=rt(await $[w](v,r),Q,w);C&&(m={...C,...W(w,C.message)},X(C.message),l&&(N[L]=m))}if(!j(m)&&(N[L]={ref:Q,...m},!l))return N}}return X(!0),N};const Kt={mode:G.onSubmit,reValidateMode:G.onChange,shouldFocusError:!0};function Gt(e={}){let s={...Kt,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:K(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},l={},o=E(s.defaultValues)||E(s.values)?T(s.defaultValues||s.values)||{}:{},n=s.shouldUnregister?{}:T(o),c={action:!1,mount:!1,watch:!1,keepIsValid:!1},f={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},O,M=0;const D={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},V={...D};let F={...V};const x={array:Ke(),state:Ke()},$=s.criteriaMode===G.all,L=t=>i=>{clearTimeout(M),M=setTimeout(t,i)},J=async t=>{if(!c.keepIsValid&&!s.disabled&&(V.isValid||F.isValid||t)){let i;s.resolver?(i=j((await re()).errors),B()):i=await W(l,!0),i!==r.isValid&&x.state.next({isValid:i})}},B=(t,i)=>{!s.disabled&&(V.isValidating||V.validatingFields||F.isValidating||F.validatingFields)&&((t||Array.from(f.mount)).forEach(a=>{a&&(i?k(r.validatingFields,a,i):p(r.validatingFields,a))}),x.state.next({validatingFields:r.validatingFields,isValidating:!j(r.validatingFields)}))},v=(t,i=[],a,y,d=!0,u=!0)=>{if(y&&a&&!s.disabled){if(c.action=!0,u&&Array.isArray(b(l,t))){const g=a(b(l,t),y.argA,y.argB);d&&k(l,t,g)}if(u&&Array.isArray(b(r.errors,t))){const g=a(b(r.errors,t),y.argA,y.argB);d&&k(r.errors,t,g),Ht(r.errors,t)}if((V.touchedFields||F.touchedFields)&&u&&Array.isArray(b(r.touchedFields,t))){const g=a(b(r.touchedFields,t),y.argA,y.argB);d&&k(r.touchedFields,t,g)}(V.dirtyFields||F.dirtyFields)&&(r.dirtyFields=ae(o,n)),x.state.next({name:t,isDirty:m(t,i),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else k(n,t,i)},Q=(t,i)=>{k(r.errors,t,i),x.state.next({errors:r.errors})},X=t=>{r.errors=t,x.state.next({errors:r.errors,isValid:!1})},N=(t,i,a,y)=>{const d=b(l,t);if(d){const u=b(n,t,S(a)?b(o,t):a);S(u)||y&&y.defaultChecked||i?k(n,t,i?u:Qe(d._f)):R(t,u),c.mount&&!c.action&&J()}},ne=(t,i,a,y,d)=>{let u=!1,g=!1;const _={name:t};if(!s.disabled){if(!a||y){(V.isDirty||F.isDirty)&&(g=r.isDirty,r.isDirty=_.isDirty=m(),u=g!==_.isDirty);const A=te(b(o,t),i);g=!!b(r.dirtyFields,t),A?p(r.dirtyFields,t):k(r.dirtyFields,t,!0),_.dirtyFields=r.dirtyFields,u=u||(V.dirtyFields||F.dirtyFields)&&g!==!A}if(a){const A=b(r.touchedFields,t);A||(k(r.touchedFields,t,a),_.touchedFields=r.touchedFields,u=u||(V.touchedFields||F.touchedFields)&&A!==a)}u&&d&&x.state.next(_)}return u?_:{}},ge=(t,i,a,y)=>{const d=b(r.errors,t),u=(V.isValid||F.isValid)&&Y(i)&&r.isValid!==i;if(s.delayError&&a?(O=L(()=>Q(t,a)),O(s.delayError)):(clearTimeout(M),O=null,a?k(r.errors,t,a):p(r.errors,t)),(a?!te(d,a):d)||!j(y)||u){const g={...y,...u&&Y(i)?{isValid:i}:{},errors:r.errors,name:t};r={...r,...g},x.state.next(g)}},re=async t=>(B(t,!0),await s.resolver(n,s.context,Pt(t||f.mount,l,s.criteriaMode,s.shouldUseNativeValidation))),ie=async t=>{const{errors:i}=await re(t);if(B(t),t)for(const a of t){const y=b(i,a);y?k(r.errors,a,y):p(r.errors,a)}else r.errors=i;return i},W=async(t,i,a={valid:!0})=>{for(const y in t){const d=t[y];if(d){const{_f:u,...g}=d;if(u){const _=f.array.has(u.name),A=d._f&&qt(d._f);A&&V.validatingFields&&B([u.name],!0);const H=await st(d,f.disabled,n,$,s.shouldUseNativeValidation&&!i,_);if(A&&V.validatingFields&&B([u.name]),H[u.name]&&(a.valid=!1,i))break;!i&&(b(H,u.name)?_?zt(r.errors,H,u.name):k(r.errors,u.name,H[u.name]):p(r.errors,u.name))}!j(g)&&await W(g,i,a)}}return a.valid},he=()=>{for(const t of f.unMount){const i=b(l,t);i&&(i._f.refs?i._f.refs.every(a=>!De(a)):!De(i._f.ref))&&_e(t)}f.unMount=new Set},m=(t,i)=>!s.disabled&&(t&&i&&k(n,t,i),!te(Re(),o)),w=(t,i,a)=>Ot(t,f,{...c.mount?n:S(i)?o:q(t)?{[t]:i}:i},a,i),C=t=>Ne(b(c.mount?n:o,t,s.shouldUnregister?b(o,t,[]):[])),R=(t,i,a={})=>{const y=b(l,t);let d=i;if(y){const u=y._f;u&&(!u.disabled&&k(n,t,ut(i,u)),d=me(u.ref)&&I(i)?"":i,at(u.ref)?[...u.ref.options].forEach(g=>g.selected=d.includes(g.value)):u.refs?be(u.ref)?u.refs.forEach(g=>{(!g.defaultChecked||!g.disabled)&&(Array.isArray(d)?g.checked=!!d.find(_=>_===g.value):g.checked=d===g.value||!!d)}):u.refs.forEach(g=>g.checked=g.value===d):Te(u.ref)?u.ref.value="":(u.ref.value=d,u.ref.type||x.state.next({name:t,values:T(n)})))}(a.shouldDirty||a.shouldTouch)&&ne(t,d,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&ce(t)},z=(t,i,a)=>{for(const y in i){if(!i.hasOwnProperty(y))return;const d=i[y],u=t+"."+y,g=b(l,u);(f.array.has(t)||E(d)||g&&!g._f)&&!se(d)?z(u,d,a):R(u,d,a)}},U=(t,i,a={})=>{const y=b(l,t),d=f.array.has(t),u=T(i);k(n,t,u),d?(x.array.next({name:t,values:T(n)}),(V.isDirty||V.dirtyFields||F.isDirty||F.dirtyFields)&&a.shouldDirty&&x.state.next({name:t,dirtyFields:ae(o,n),isDirty:m(t,u)})):y&&!y._f&&!I(u)?z(t,u,a):R(t,u,a),et(t,f)&&x.state.next({...r,name:t}),x.state.next({name:c.mount?t:void 0,values:T(n)})},oe=async t=>{c.mount=!0;const i=t.target;let a=i.name,y=!0;const d=b(l,a),u=A=>{y=Number.isNaN(A)||se(A)&&isNaN(A.getTime())||te(A,b(n,a,A))},g=Xe(s.mode),_=Xe(s.reValidateMode);if(d){let A,H;const xe=i.type?Qe(d._f):Dt(t),ee=t.type===ze.BLUR||t.type===ze.FOCUS_OUT,mt=!Mt(d._f)&&!s.resolver&&!b(r.errors,a)&&!d._f.deps||Wt(ee,b(r.touchedFields,a),r.isSubmitted,_,g),Ae=et(a,f,ee);k(n,a,xe),ee?(!i||!i.readOnly)&&(d._f.onBlur&&d._f.onBlur(t),O&&O(0)):d._f.onChange&&d._f.onChange(t);const ke=ne(a,xe,ee),vt=!j(ke)||Ae;if(!ee&&x.state.next({name:a,type:t.type,values:T(n)}),mt)return(V.isValid||F.isValid)&&(s.mode==="onBlur"?ee&&J():ee||J()),vt&&x.state.next({name:a,...Ae?{}:ke});if(!ee&&Ae&&x.state.next({...r}),s.resolver){const{errors:Be}=await re([a]);if(B([a]),u(xe),y){const wt=tt(r.errors,l,a),We=tt(Be,l,wt.name||a);A=We.error,a=We.name,H=j(Be)}}else B([a],!0),A=(await st(d,f.disabled,n,$,s.shouldUseNativeValidation))[a],B([a]),u(xe),y&&(A?H=!1:(V.isValid||F.isValid)&&(H=await W(l,!0)));y&&(d._f.deps&&(!Array.isArray(d._f.deps)||d._f.deps.length>0)&&ce(d._f.deps),ge(a,H,A,ke))}},ue=(t,i)=>{if(b(r.errors,i)&&t.focus)return t.focus(),1},ce=async(t,i={})=>{let a,y;const d=fe(t);if(s.resolver){const u=await ie(S(t)?t:d);a=j(u),y=t?!d.some(g=>b(u,g)):a}else t?(y=(await Promise.all(d.map(async u=>{const g=b(l,u);return await W(g&&g._f?{[u]:g}:g)}))).every(Boolean),!(!y&&!r.isValid)&&J()):y=a=await W(l);return x.state.next({...!q(t)||(V.isValid||F.isValid)&&a!==r.isValid?{}:{name:t},...s.resolver||!t?{isValid:a}:{},errors:r.errors}),i.shouldFocus&&!y&&ye(l,ue,t?d:f.mount),y},Re=(t,i)=>{let a={...c.mount?n:o};return i&&(a=lt(i.dirtyFields?r.dirtyFields:r.touchedFields,a)),S(t)?a:q(t)?b(a,t):t.map(y=>b(a,y))},je=(t,i)=>({invalid:!!b((i||r).errors,t),isDirty:!!b((i||r).dirtyFields,t),error:b((i||r).errors,t),isValidating:!!b(r.validatingFields,t),isTouched:!!b((i||r).touchedFields,t)}),dt=t=>{t&&fe(t).forEach(i=>p(r.errors,i)),x.state.next({errors:t?r.errors:{}})},Ie=(t,i,a)=>{const y=(b(l,t,{_f:{}})._f||{}).ref,d=b(r.errors,t)||{},{ref:u,message:g,type:_,...A}=d;k(r.errors,t,{...A,...i,ref:y}),x.state.next({name:t,errors:r.errors,isValid:!1}),a&&a.shouldFocus&&y&&y.focus&&y.focus()},ft=(t,i)=>K(t)?x.state.subscribe({next:a=>"values"in a&&t(w(void 0,i),a)}):w(t,i,!0),Le=t=>x.state.subscribe({next:i=>{Bt(t.name,i.name,t.exact)&&$t(i,t.formState||V,xt,t.reRenderRoot)&&t.callback({values:{...n},...r,...i,defaultValues:o})}}).unsubscribe,yt=t=>(c.mount=!0,F={...F,...t.formState},Le({...t,formState:{...D,...t.formState}})),_e=(t,i={})=>{for(const a of t?fe(t):f.mount)f.mount.delete(a),f.array.delete(a),i.keepValue||(p(l,a),p(n,a)),!i.keepError&&p(r.errors,a),!i.keepDirty&&p(r.dirtyFields,a),!i.keepTouched&&p(r.touchedFields,a),!i.keepIsValidating&&p(r.validatingFields,a),!s.shouldUnregister&&!i.keepDefaultValue&&p(o,a);x.state.next({values:T(n)}),x.state.next({...r,...i.keepDirty?{isDirty:m()}:{}}),!i.keepIsValid&&J()},Ue=({disabled:t,name:i})=>{(Y(t)&&c.mount||t||f.disabled.has(i))&&(t?f.disabled.add(i):f.disabled.delete(i))},Ve=(t,i={})=>{let a=b(l,t);const y=Y(i.disabled)||Y(s.disabled);return k(l,t,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:t}},name:t,mount:!0,...i}}),f.mount.add(t),a?Ue({disabled:Y(i.disabled)?i.disabled:s.disabled,name:t}):N(t,!0,i.value),{...y?{disabled:i.disabled||s.disabled}:{},...s.progressive?{required:!!i.required,min:de(i.min),max:de(i.max),minLength:de(i.minLength),maxLength:de(i.maxLength),pattern:de(i.pattern)}:{},name:t,onChange:oe,onBlur:oe,ref:d=>{if(d){Ve(t,i),a=b(l,t);const u=S(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,g=jt(u),_=a._f.refs||[];if(g?_.find(A=>A===u):u===a._f.ref)return;k(l,t,{_f:{...a._f,...g?{refs:[..._.filter(De),u,...Array.isArray(b(o,t))?[{}]:[]],ref:{type:u.type,name:t}}:{ref:u}}}),N(t,!1,void 0,u)}else a=b(l,t,{}),a._f&&(a._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(pt(f.array,t)&&c.action)&&f.unMount.add(t)}}},Fe=()=>s.shouldFocusError&&ye(l,ue,f.mount),bt=t=>{Y(t)&&(x.state.next({disabled:t}),ye(l,(i,a)=>{const y=b(l,a);y&&(i.disabled=y._f.disabled||t,Array.isArray(y._f.refs)&&y._f.refs.forEach(d=>{d.disabled=y._f.disabled||t}))},0,!1))},Pe=(t,i)=>async a=>{let y;a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let d=T(n);if(x.state.next({isSubmitting:!0}),s.resolver){const{errors:u,values:g}=await re();B(),r.errors=u,d=T(g)}else await W(l);if(f.disabled.size)for(const u of f.disabled)p(d,u);if(p(r.errors,"root"),j(r.errors)){x.state.next({errors:{}});try{await t(d,a)}catch(u){y=u}}else i&&await i({...r.errors},a),Fe(),setTimeout(Fe);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:j(r.errors)&&!y,submitCount:r.submitCount+1,errors:r.errors}),y)throw y},gt=(t,i={})=>{b(l,t)&&(S(i.defaultValue)?U(t,T(b(o,t))):(U(t,i.defaultValue),k(o,t,T(i.defaultValue))),i.keepTouched||p(r.touchedFields,t),i.keepDirty||(p(r.dirtyFields,t),r.isDirty=i.defaultValue?m(t,T(b(o,t))):m()),i.keepError||(p(r.errors,t),V.isValid&&J()),x.state.next({...r}))},qe=(t,i={})=>{const a=t?T(t):o,y=T(a),d=j(t),u=d?o:y;if(i.keepDefaultValues||(o=a),!i.keepValues){if(i.keepDirtyValues){const g=new Set([...f.mount,...Object.keys(ae(o,n))]);for(const _ of Array.from(g))b(r.dirtyFields,_)?k(u,_,b(n,_)):U(_,b(u,_))}else{if(Ee&&S(t))for(const g of f.mount){const _=b(l,g);if(_&&_._f){const A=Array.isArray(_._f.refs)?_._f.refs[0]:_._f.ref;if(me(A)){const H=A.closest("form");if(H){H.reset();break}}}}if(i.keepFieldsRef)for(const g of f.mount)U(g,b(u,g));else l={}}n=s.shouldUnregister?i.keepDefaultValues?T(o):{}:T(u),x.array.next({values:{...u}}),x.state.next({values:{...u}})}f={mount:i.keepDirtyValues?f.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!V.isValid||!!i.keepIsValid||!!i.keepDirtyValues||!s.shouldUnregister&&!j(u),c.watch=!!s.shouldUnregister,c.keepIsValid=!!i.keepIsValid,c.action=!1,i.keepErrors||(r.errors={}),x.state.next({submitCount:i.keepSubmitCount?r.submitCount:0,isDirty:d?!1:i.keepDirty?r.isDirty:!!(i.keepDefaultValues&&!te(t,o)),isSubmitted:i.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:d?{}:i.keepDirtyValues?i.keepDefaultValues&&n?ae(o,n):r.dirtyFields:i.keepDefaultValues&&t?ae(o,t):i.keepDirty?r.dirtyFields:{},touchedFields:i.keepTouched?r.touchedFields:{},errors:i.keepErrors?r.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},Me=(t,i)=>qe(K(t)?t(n):t,{...s.resetOptions,...i}),ht=(t,i={})=>{const a=b(l,t),y=a&&a._f;if(y){const d=y.refs?y.refs[0]:y.ref;d.focus&&setTimeout(()=>{d.focus(),i.shouldSelect&&K(d.select)&&d.select()})}},xt=t=>{r={...r,...t}},$e={control:{register:Ve,unregister:_e,getFieldState:je,handleSubmit:Pe,setError:Ie,_subscribe:Le,_runSchema:re,_updateIsValidating:B,_focusError:Fe,_getWatch:w,_getDirty:m,_setValid:J,_setFieldArray:v,_setDisabledField:Ue,_setErrors:X,_getFieldArray:C,_reset:qe,_resetDefaultValues:()=>K(s.defaultValues)&&s.defaultValues().then(t=>{Me(t,s.resetOptions),x.state.next({isLoading:!1})}),_removeUnmounted:he,_disableForm:bt,_subjects:x,_proxyFormState:V,get _fields(){return l},get _formValues(){return n},get _state(){return c},set _state(t){c=t},get _defaultValues(){return o},get _names(){return f},set _names(t){f=t},get _formState(){return r},get _options(){return s},set _options(t){s={...s,...t}}},subscribe:yt,trigger:ce,register:Ve,handleSubmit:Pe,watch:ft,setValue:U,getValues:Re,reset:Me,resetField:gt,clearErrors:dt,unregister:_e,setError:Ie,setFocus:ht,getFieldState:je};return{...$e,formControl:$e}}function Yt(e={}){const s=P.useRef(void 0),r=P.useRef(void 0),[l,o]=P.useState({isDirty:!1,isValidating:!1,isLoading:K(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:K(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:l},e.defaultValues&&!K(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:c,...f}=Gt(e);s.current={...f,formState:l}}const n=s.current.control;return n._options=e,Tt(()=>{const c=n._subscribe({formState:n._proxyFormState,callback:()=>o({...n._formState}),reRenderRoot:!0});return o(f=>({...f,isReady:!0})),n._formState.isReady=!0,c},[n]),P.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),P.useEffect(()=>{e.mode&&(n._options.mode=e.mode),e.reValidateMode&&(n._options.reValidateMode=e.reValidateMode)},[n,e.mode,e.reValidateMode]),P.useEffect(()=>{e.errors&&(n._setErrors(e.errors),n._focusError())},[n,e.errors]),P.useEffect(()=>{e.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,e.shouldUnregister]),P.useEffect(()=>{if(n._proxyFormState.isDirty){const c=n._getDirty();c!==l.isDirty&&n._subjects.state.next({isDirty:c})}},[n,l.isDirty]),P.useEffect(()=>{var c;e.values&&!te(e.values,r.current)?(n._reset(e.values,{keepFieldsRef:!0,...n._options.resetOptions}),!((c=n._options.resetOptions)===null||c===void 0)&&c.keepIsValid||n._setValid(),r.current=e.values,o(f=>({...f}))):n._resetDefaultValues()},[n,e.values]),P.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),s.current.formState=Ct(l,n),s.current}const er=()=>{const{language:e,highContrast:s}=_t(),{register:r,handleSubmit:l,formState:{errors:o},reset:n}=Yt(),[c,f]=He.useState("IDLE"),[O,M]=He.useState(""),D={en:{title:"Service Request Draft",desc:"Draft complaints or request guidelines. (Demo Only)",disclaimer:"Disclaimer: Submitting this form does NOT lodge an official grievance with the Ministry.",lblName:"Full Name",lblContact:"Contact Number",lblType:"Type",lblCategory:"Category",lblDesc:"Description",btnSubmit:"Submit Request",submitting:"Submitting...",successTitle:"Request Submitted!",successDesc:"Your request has been logged successfully.",trackId:"Tracking ID",btnAnother:"Submit Another",error:"Failed to submit. Please try again."},hi:{title:"सेवा अनुरोध ड्राफ्ट",desc:"शिकायतें ड्राफ्ट करें या दिशा-निर्देशों का अनुरोध करें। (केवल डेमो)",disclaimer:"अस्वीकरण: इस फ़ॉर्म को सबमिट करने से मंत्रालय में आधिकारिक शिकायत दर्ज नहीं होती है।",lblName:"पूरा नाम",lblContact:"संपर्क नंबर",lblType:"प्रकार",lblCategory:"श्रेणी",lblDesc:"विवरण",btnSubmit:"अनुरोध सबमिट करें",submitting:"सबमिट हो रहा है...",successTitle:"अनुरोध सबमिट किया गया!",successDesc:"आपका अनुरोध सफलतापूर्वक लॉग किया गया है।",trackId:"ट्रैकिंग आईडी",btnAnother:"एक और सबमिट करें",error:"सबमिट करने में विफल। कृपया पुन: प्रयास करें।"},ta:{title:"சேவை கோரிக்கை வரைவு",desc:"புகார்களை வரைவு செய்யுங்கள் அல்லது வழிகாட்டுதல்களைக் கோருங்கள். (டெமோ மட்டும்)",disclaimer:"பொறுப்புத் துறப்பு: இந்த படிவத்தைச் சமர்ப்பிப்பது அமைச்சகத்தில் அதிகாரப்பூர்வமான புகாரைப் பதிவு செய்யாது.",lblName:"முழு பெயர்",lblContact:"தொடர்பு எண்",lblType:"வகை",lblCategory:"வகை",lblDesc:"விளக்கம்",btnSubmit:"கோரிக்கையைச் சமர்ப்பிக்கவும்",submitting:"சமர்ப்பிக்கிறது...",successTitle:"கோரிக்கை சமர்ப்பிக்கப்பட்டது!",successDesc:"உங்கள் கோரிக்கை வெற்றிகரமாகப் பதிவு செய்யப்பட்டுள்ளது.",trackId:"கண்காணிப்பு ஐடி",btnAnother:"மற்றொன்றைச் சமர்ப்பிக்கவும்",error:"சமர்ப்பிக்கத் தவறிவிட்டது. மீண்டும் முயற்சிக்கவும்."}}[e],V=async F=>{f("LOADING");try{const $=await(await fetch("/api/complaints/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:F.requestType,category:F.category,description:F.description,citizenDetails:{name:F.name,contact:F.contact,disabilityType:F.disabilityType}})})).json();$.success?(M($.trackingId),f("SUCCESS"),n()):f("ERROR")}catch{f("ERROR")}};return c==="SUCCESS"?h.jsxs("div",{className:`max-w-md mx-auto p-8 rounded-3xl text-center border shadow-lg mt-10 ${s?"bg-black border-yellow-400 text-yellow-400":"bg-green-50 border-green-200 text-green-800"}`,children:[h.jsx(At,{className:`w-16 h-16 mx-auto mb-4 ${s?"text-yellow-400":"text-green-500"}`}),h.jsx("h2",{className:"text-2xl font-bold mb-2",children:D.successTitle}),h.jsx("p",{className:`mb-6 ${s?"text-gray-300":"text-gray-600"}`,children:D.successDesc}),h.jsxs("div",{className:`p-4 rounded-xl border mb-6 ${s?"bg-gray-900 border-yellow-400":"bg-white border-green-200"}`,children:[h.jsx("p",{className:`text-sm uppercase font-bold tracking-wider ${s?"text-gray-400":"text-gray-500"}`,children:D.trackId}),h.jsx("p",{className:`text-3xl font-mono font-black tracking-widest mt-1 ${s?"text-white":"text-green-700"}`,children:O})]}),h.jsx("button",{onClick:()=>f("IDLE"),className:`w-full py-3 rounded-xl font-bold transition ${s?"bg-yellow-400 text-black hover:bg-white":"bg-green-600 text-white hover:bg-green-700"}`,children:D.btnAnother})]}):h.jsxs("div",{className:`max-w-2xl mx-auto p-6 ${s?"bg-black text-white":""}`,children:[h.jsx("h1",{className:"text-3xl font-bold mb-2",children:D.title}),h.jsx("p",{className:`mb-4 ${s?"text-gray-300":"text-gray-500"}`,children:D.desc}),h.jsxs("div",{className:`border p-3 rounded-xl mb-8 text-xs ${s?"bg-gray-900 border-yellow-400 text-yellow-400 font-bold":"bg-yellow-50 border-yellow-200 text-yellow-800"}`,children:[h.jsx("strong",{children:"Note:"})," ",D.disclaimer]}),h.jsxs("form",{onSubmit:l(V),className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:`block text-sm font-bold mb-2 ${s?"text-yellow-400":"text-gray-700"}`,children:D.lblName}),h.jsx("input",{...r("name",{required:!0}),className:`w-full p-3 rounded-xl border focus:ring-2 outline-none transition ${s?"bg-black border-yellow-400 text-white focus:ring-yellow-400":"bg-gray-50 border-gray-200 focus:bg-white focus:ring-blue-500"}`,placeholder:"e.g. Rahul Kumar"}),o.name&&h.jsx("span",{className:"text-red-500 text-xs mt-1",children:"Required"})]}),h.jsxs("div",{children:[h.jsx("label",{className:`block text-sm font-bold mb-2 ${s?"text-yellow-400":"text-gray-700"}`,children:D.lblContact}),h.jsx("input",{...r("contact",{required:!0,pattern:/^[0-9]{10}$/}),className:`w-full p-3 rounded-xl border focus:ring-2 outline-none transition ${s?"bg-black border-yellow-400 text-white focus:ring-yellow-400":"bg-gray-50 border-gray-200 focus:bg-white focus:ring-blue-500"}`,placeholder:"e.g. 9876543210"})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:`block text-sm font-bold mb-2 ${s?"text-yellow-400":"text-gray-700"}`,children:D.lblType}),h.jsxs("select",{...r("requestType",{required:!0}),className:`w-full p-3 rounded-xl border focus:ring-2 outline-none transition ${s?"bg-black border-yellow-400 text-white":"bg-gray-50 border-gray-200 focus:bg-white focus:ring-blue-500"}`,children:[h.jsx("option",{value:"Complaint",children:"Complaint"}),h.jsx("option",{value:"Service Request",children:"New Service Request"}),h.jsx("option",{value:"Information",children:"Information Needed"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:`block text-sm font-bold mb-2 ${s?"text-yellow-400":"text-gray-700"}`,children:D.lblCategory}),h.jsxs("select",{...r("category",{required:!0}),className:`w-full p-3 rounded-xl border focus:ring-2 outline-none transition ${s?"bg-black border-yellow-400 text-white":"bg-gray-50 border-gray-200 focus:bg-white focus:ring-blue-500"}`,children:[h.jsx("option",{value:"Pension",children:"Disability Pension"}),h.jsx("option",{value:"UDID",children:"UDID Card"}),h.jsx("option",{value:"Transport",children:"Transport Pass"}),h.jsx("option",{value:"Equipment",children:"Assistive Equipment (ADIP)"}),h.jsx("option",{value:"Other",children:"Other"})]})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:`block text-sm font-bold mb-2 ${s?"text-yellow-400":"text-gray-700"}`,children:D.lblDesc}),h.jsx("textarea",{...r("description",{required:!0}),className:`w-full p-3 rounded-xl border focus:ring-2 outline-none transition h-32 ${s?"bg-black border-yellow-400 text-white":"bg-gray-50 border-gray-200 focus:bg-white focus:ring-blue-500"}`,placeholder:"Please describe..."}),o.description&&h.jsx("span",{className:"text-red-500 text-xs mt-1",children:"Required"})]}),h.jsx(Vt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},disabled:c==="LOADING",className:`w-full py-4 rounded-2xl font-bold shadow-xl transition flex items-center justify-center gap-2 ${s?"bg-yellow-400 text-black shadow-none":"bg-blue-600 text-white shadow-blue-200 hover:bg-blue-700"}`,children:c==="LOADING"?D.submitting:h.jsxs(h.Fragment,{children:[h.jsx(Ft,{size:18})," ",D.btnSubmit]})}),c==="ERROR"&&h.jsxs("div",{className:"p-4 bg-red-50 text-red-600 rounded-xl flex items-center gap-2",children:[h.jsx(kt,{size:18}),D.error]})]})]})};export{er as ServiceRequest};
