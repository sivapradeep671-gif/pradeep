import{u as N,a as $,r as i,j as e}from"./index-CVOoTMyE.js";import{A as u}from"./activity-BtuPrjFt.js";import{C as v}from"./circle-alert-D9kpPFLR.js";import{S as k}from"./search-_aX63oiP.js";import{F as C}from"./file-text-DSwN3lJ_.js";const S="/api",D=()=>{const r=N(),{highContrast:a,fontSize:c,language:d,t}=$(),[s,o]=i.useState(null),[f,p]=i.useState(!0),[x,j]=i.useState(null),m=localStorage.getItem("citizenId");i.useEffect(()=>{if(!m){r("/onboarding");return}(async()=>{try{const n=await fetch(`${S}/dashboard/${m}`);if(!n.ok)throw new Error("Failed to load dashboard");const l=await n.json();o(l);let b=`Welcome back, ${l.citizenName}`;d==="ta"&&(b=`வணக்கம் ${l.citizenName}`),d==="hi"&&(b=`नमस्ते ${l.citizenName}`);const y=new SpeechSynthesisUtterance(`${b}. ${t("dashboard.account_balance")} is ₹${l.totalGrantBalance||0}. You have ${l.recommendedSchemesCount} ${t("dashboard.schemes_recommended")}.`);window.speechSynthesis.speak(y)}catch{j("Could not connect to Inaiya Thozhan services.")}finally{p(!1)}})()},[m,r]);const w=()=>c==="extra-large"?"grid-cols-1":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3";return f?e.jsx("div",{className:"p-8 text-center text-2xl",role:"status",children:"Loading your personal assistant..."}):x?e.jsxs("div",{className:"p-8 bg-red-100 border-l-4 border-red-500 text-red-700",role:"alert",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Connection Error"}),e.jsx("p",{children:x}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded",children:"Retry"})]}):e.jsxs("div",{className:`min-h-screen p-6 ${a?"bg-black text-yellow-400":"bg-gray-50 text-gray-900"}`,children:[e.jsxs("header",{className:"mb-10 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold mb-2 focus:outline-none",tabIndex:0,children:[t("dashboard.greeting"),", ",s==null?void 0:s.citizenName]}),e.jsx("p",{className:"text-lg opacity-80",children:t("dashboard.summary")})]}),e.jsxs("button",{onClick:()=>window.location.reload(),className:`flex items-center gap-2 px-6 py-3 rounded-full font-bold border-2 ${a?"border-yellow-400 text-yellow-400":"bg-white border-blue-200 shadow-sm"}`,"aria-label":t("dashboard.refresh"),children:[e.jsx(u,{className:"h-5 w-5"})," ",t("dashboard.refresh")]})]}),s&&s.pendingActionItems&&s.pendingActionItems.length>0&&e.jsxs("section",{"aria-labelledby":"alerts-heading",className:`mb-10 p-6 rounded-xl border-l-8 ${a?"bg-gray-900 border-red-500":"bg-orange-50 border-orange-500"}`,children:[e.jsxs("h2",{id:"alerts-heading",className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(v,{className:"h-6 w-6 text-red-500"})," ",t("dashboard.action_needed")]}),e.jsx("ul",{className:"space-y-3",children:s.pendingActionItems.map((g,n)=>e.jsxs("li",{className:"text-xl font-medium flex items-center gap-3",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," ",g]},n))})]}),e.jsxs("main",{className:`grid ${w()} gap-8`,children:[e.jsx(h,{title:t("dashboard.account_balance"),desc:`₹${(s==null?void 0:s.totalGrantBalance)??0}`,subDesc:t("dashboard.dbt_summary"),icon:e.jsx("div",{className:"text-2xl font-black",children:"₹"}),onClick:()=>{},highContrast:a,primary:!0}),e.jsx(h,{title:t("dashboard.my_schemes"),desc:`${s==null?void 0:s.recommendedSchemesCount} ${t("dashboard.schemes_recommended")}`,icon:e.jsx(k,{className:"h-12 w-12"}),onClick:()=>r("/schemes"),highContrast:a}),e.jsx(h,{title:t("dashboard.my_documents"),desc:t("dashboard.safe_folder"),icon:e.jsx(C,{className:"h-12 w-12"}),onClick:()=>r("/documents"),highContrast:a}),e.jsx(h,{title:t("dashboard.track_status"),desc:`${(s==null?void 0:s.activeApplicationsCount)||0} ${t("dashboard.active_applications")}`,icon:e.jsx(u,{className:"h-12 w-12"}),onClick:()=>r("/applications/track"),highContrast:a})]})]})},h=({title:r,desc:a,subDesc:c,icon:d,onClick:t,highContrast:s,primary:o})=>e.jsxs("button",{onClick:t,className:`text-left p-8 rounded-2xl transition-all transform hover:scale-105 hover:shadow-2xl focus:ring-4 focus:ring-blue-400 focus:outline-none flex flex-col justify-between h-64
            ${s?"bg-gray-900 border-2 border-yellow-400 hover:bg-gray-800":o?"bg-gradient-to-br from-blue-600 to-indigo-700 text-white shadow-lg":"bg-white shadow-md hover:border-blue-300 border-2 border-transparent"}
        `,"aria-label":`${r}, ${a}`,children:[e.jsx("div",{className:`p-4 rounded-full w-fit mb-4 ${s?"bg-yellow-400 text-black":o?"bg-white/20":"bg-blue-50 text-blue-600"}`,children:d}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:r}),e.jsx("p",{className:`text-lg ${s?"text-gray-300":o?"text-blue-100":"text-gray-600"}`,children:a}),c&&e.jsx("p",{className:`text-sm mt-1 opacity-70 ${s?"text-gray-400":o?"text-blue-200":"text-gray-500"}`,children:c})]})]});export{D as UserDashboard};
