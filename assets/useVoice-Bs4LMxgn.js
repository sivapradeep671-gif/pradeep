import{a as b,r as n}from"./index-CVOoTMyE.js";const N=()=>{const{language:a}=b(),[h,c]=n.useState(!1),[i,o]=n.useState(!1),[w,S]=n.useState(""),[d,g]=n.useState(0),e=n.useRef(null);n.useEffect(()=>{"webkitSpeechRecognition"in window&&(e.current=new window.webkitSpeechRecognition,e.current.continuous=!1,e.current.interimResults=!1)},[]);const k=n.useCallback(r=>{if(!("speechSynthesis"in window))return;u();const t=typeof r=="string"?new SpeechSynthesisUtterance(r):r;t.onstart=()=>c(!0),t.onend=()=>c(!1),t.onerror=()=>c(!1),window.speechSynthesis.speak(t)},[]),u=n.useCallback(()=>{"speechSynthesis"in window&&(window.speechSynthesis.cancel(),c(!1)),e.current&&i&&(e.current.stop(),o(!1))},[i]),y=n.useCallback((r,t=!1)=>{if(!e.current)return console.warn("Speech Recognition not supported"),()=>{};const I={en:"en-IN",ta:"ta-IN",hi:"hi-IN"};e.current.lang=I[a]||"en-IN",e.current.continuous=t,e.current.onstart=()=>o(!0),e.current.onend=()=>o(!1),e.current.onresult=s=>{const R=s.resultIndex,l=s.results[R][0],f=l.transcript,p=l.confidence;S(f),g(p),r(f,p)},e.current.onerror=s=>{console.error("Speech recognition error",s.error),o(!1)};try{e.current.start()}catch{}return()=>{try{e.current.stop()}catch{}}},[a]);return{speak:k,cancel:u,listen:y,isSpeaking:h,isListening:i,transcript:w,confidence:d}};export{N as u};
