import{r,j as e}from"./index-CVOoTMyE.js";import{L as i}from"./loader-circle-CVESfS4d.js";import{C as x}from"./circle-check-big-BnXWwQtn.js";import{C as h}from"./circle-x-ay0iPRPY.js";const j=()=>{const[s,n]=r.useState([]),[o,c]=r.useState(!0),l=async()=>{try{const a=await(await fetch("http://localhost:8888/api/complaints/all")).json();a.success&&n(a.data)}catch(t){console.error(t)}finally{c(!1)}};r.useEffect(()=>{l()},[]);const d=async(t,a)=>{await fetch(`http://localhost:8888/api/complaints/update/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})}),l()};return o?e.jsx("div",{className:"flex justify-center p-20",children:e.jsx(i,{className:"animate-spin"})}):e.jsxs("div",{className:"p-8 bg-gray-50 min-h-screen",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Officer Dashboard"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-500 font-bold",children:"Total Pending"}),e.jsx("p",{className:"text-3xl font-black text-yellow-600",children:s.filter(t=>t.status==="Pending").length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-500 font-bold",children:"Resolved"}),e.jsx("p",{className:"text-3xl font-black text-green-600",children:s.filter(t=>t.status==="Resolved").length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-500 font-bold",children:"Rejected"}),e.jsx("p",{className:"text-3xl font-black text-red-600",children:s.filter(t=>t.status==="Rejected").length})]})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-100 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-xs font-bold uppercase text-gray-500",children:"ID"}),e.jsx("th",{className:"p-4 text-xs font-bold uppercase text-gray-500",children:"Citizen"}),e.jsx("th",{className:"p-4 text-xs font-bold uppercase text-gray-500",children:"Category"}),e.jsx("th",{className:"p-4 text-xs font-bold uppercase text-gray-500",children:"Date"}),e.jsx("th",{className:"p-4 text-xs font-bold uppercase text-gray-500",children:"Status"}),e.jsx("th",{className:"p-4 text-xs font-bold uppercase text-gray-500",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:s.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-4 font-mono font-bold text-xs",children:t.trackingId}),e.jsxs("td",{className:"p-4",children:[e.jsx("p",{className:"font-bold text-gray-900",children:t.citizenDetails.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.citizenDetails.contact})]}),e.jsx("td",{className:"p-4 text-sm",children:t.category}),e.jsx("td",{className:"p-4 text-xs text-gray-500",children:new Date(t.createdAt).toLocaleDateString()}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${t.status==="Pending"?"bg-yellow-100 text-yellow-700":t.status==="Resolved"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:t.status})}),e.jsxs("td",{className:"p-4 flex gap-2",children:[e.jsx("button",{onClick:()=>d(t._id,"Resolved"),className:"p-2 bg-green-50 text-green-600 rounded-lg hover:bg-green-100",title:"Resolve",children:e.jsx(x,{size:16})}),e.jsx("button",{onClick:()=>d(t._id,"Rejected"),className:"p-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100",title:"Reject",children:e.jsx(h,{size:16})})]})]},t._id))})]})})]})};export{j as AdminDashboard};
