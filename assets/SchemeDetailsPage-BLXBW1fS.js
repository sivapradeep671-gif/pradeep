import{b as D,u as F,a as q,d as E,e as I,r as n,j as e}from"./index-CVOoTMyE.js";import{A as O}from"./arrow-left-DbSgRtZB.js";import{S as U}from"./shield-check-BSebOn0C.js";import{R as B,W as J,S as M}from"./wand-sparkles-BhTqIe1v.js";import{C as h}from"./circle-check-big-BnXWwQtn.js";import{C as S}from"./circle-x-ay0iPRPY.js";import{F as W}from"./file-text-DSwN3lJ_.js";const Z=()=>{const{id:m}=D(),g=F(),{language:a,highContrast:c,t:r}=q(),{speak:k,stop:$,isPlaying:p}=E(),{viewMode:A}=I(),[s,b]=n.useState(null),[C,R]=n.useState(!0),[l,u]=n.useState(null),[f,j]=n.useState(!1),[x,P]=n.useState({age:0,income:0,disability_type:"Unknown",disability_percentage:0});n.useEffect(()=>{const i=localStorage.getItem("cachedProfile");if(i){const t=JSON.parse(i);let o=30;t.age_band==="0-18"&&(o=10),t.age_band==="19-35"&&(o=25),t.age_band==="36-59"&&(o=45),t.age_band==="60+"&&(o=70);let d=0;t.income_band==="under_2.5L"&&(d=1e5),t.income_band==="2.5L-5L"&&(d=3e5),t.income_band==="above_5L"&&(d=6e5),P({age:o,income:d,disability_type:"Locomotor",disability_percentage:t.disability_severity==="benchmark_40_plus"?50:20})}},[]);const T=()=>{var i;if(p)$();else{const t=`
                ${y()}. 
                ${r("schemes.description")}: ${_()}.
                ${r("schemes.benefits")}: ${(i=w())==null?void 0:i.join(". ")}.
            `;k(t)}};if(n.useEffect(()=>{fetch(`/api/schemes/${m}`).then(i=>i.json()).then(i=>{i.success?b(i.result):b(null)}).catch(i=>console.error(i)).finally(()=>R(!1))},[m]),C)return e.jsx("div",{className:"p-10 text-center",children:r("common.loading")});if(!s)return e.jsx("div",{className:"p-10 text-center",children:r("schemes.no_results")});const y=()=>a==="ta"&&s.title_ta?s.title_ta:a==="hi"&&s.title_hi?s.title_hi:s.title,N=()=>a==="ta"&&s.description_ta?s.description_ta:a==="hi"&&s.description_hi?s.description_hi:s.description,_=()=>l||N(),w=()=>a==="ta"&&s.benefits_ta?s.benefits_ta:a==="hi"&&s.benefits_hi?s.benefits_hi:s.benefits,L=()=>a==="ta"&&s.documentsRequired_ta?s.documentsRequired_ta:a==="hi"&&s.documentsRequired_hi?s.documentsRequired_hi:s.documentsRequired,z=()=>a==="ta"&&s.howToApplySteps_ta?s.howToApplySteps_ta:a==="hi"&&s.howToApplySteps_hi?s.howToApplySteps_hi:s.howToApplySteps||[],v=i=>i==="age"?x.age>=s.eligibility.minAge&&x.age<=(s.eligibility.maxAge||100):i==="income"?x.income<=(s.eligibility.incomeLimit||1/0):!0;return e.jsx("div",{className:`min-h-screen p-6 ${c?"bg-black text-yellow-400":"bg-gray-50 text-gray-900"}`,children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("button",{onClick:()=>g(-1),className:"flex items-center gap-2 mb-6 font-bold hover:underline",children:[e.jsx(O,{size:20})," ",r("schemes.back_to_schemes")]}),e.jsxs("div",{className:`p-8 rounded-3xl shadow-xl ${c?"border-2 border-yellow-400":"bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-bold uppercase tracking-wider mb-2 inline-block",children:s.category}),e.jsx("h1",{className:"text-3xl font-black mb-2 leading-tight",children:y()}),e.jsx("p",{className:"text-xl opacity-80",children:s.department})]}),e.jsx(U,{size:48,className:"text-green-600"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-2 space-y-8",children:[e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3 border-b pb-2",children:[e.jsx("h2",{className:"text-xl font-bold uppercase tracking-wide",children:r("schemes.description")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{if(l){u(null);return}j(!0);try{const t=await(await fetch("/api/ai/simplify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:N(),language:a||"en"})})).json();t.success&&t.result&&u(t.result)}catch(i){console.error("Simplification failed",i)}finally{j(!1)}},className:`flex items-center gap-2 px-3 py-1 rounded-full text-sm font-bold transition-all ${f?"opacity-70":""} ${l?"bg-green-100 text-green-700 border border-green-200":"bg-purple-100 text-purple-700 hover:bg-purple-200"}`,children:f?e.jsx(B,{className:"w-3 h-3 animate-spin"}):l?e.jsx(e.Fragment,{children:"Show Original"}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-3 h-3"})," Simplify"]})}),e.jsx("button",{onClick:T,className:`flex items-center gap-2 px-3 py-1 rounded-full text-sm font-bold transition-all ${p?"bg-red-100 text-red-600 animate-pulse":"bg-blue-100 text-blue-600 hover:bg-blue-200"}`,children:p?e.jsx(e.Fragment,{children:r("schemes.stop_reading")}):e.jsx(e.Fragment,{children:r("schemes.read_page")})})]})]}),e.jsxs("div",{className:`relative rounded-xl transition-colors ${l?c?"bg-gray-800 p-4 border border-green-400":"bg-green-50 p-4 border border-green-200":""}`,children:[l&&e.jsxs("div",{className:"absolute -top-3 right-4 px-2 py-0.5 bg-green-100 text-green-700 text-[10px] font-bold rounded-full border border-green-200 flex items-center gap-1",children:[e.jsx(M,{className:"w-3 h-3"})," AI Simplified"]}),e.jsx("p",{className:"text-lg leading-relaxed whitespace-pre-line",children:_()})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold mb-3 uppercase tracking-wide border-b pb-2",children:r("schemes.benefits")}),e.jsx("ul",{className:"list-disc pl-5 space-y-2",children:(w()||[]).map((i,t)=>e.jsx("li",{className:"text-lg",children:i},t))})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold mb-3 uppercase tracking-wide border-b pb-2",children:r("schemes.how_to_apply")}),e.jsx("ol",{className:"list-decimal pl-5 space-y-4",children:z().map((i,t)=>e.jsx("li",{className:"text-lg pl-2",children:i},t))})]})]}),A!=="easy"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-2xl ${c?"border border-white/20":"bg-gray-50"}`,children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(h,{size:20})," ",r("schemes.eligibility")]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Age (",s.eligibility.minAge,"-",s.eligibility.maxAge||"+",")"]}),v("age")?e.jsx(h,{className:"text-green-500",size:18}):e.jsx(S,{className:"text-red-500",size:18})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Income (< â‚¹",s.eligibility.incomeLimit,")"]}),v("income")?e.jsx(h,{className:"text-green-500",size:18}):e.jsx(S,{className:"text-red-500",size:18})]})]})]}),e.jsxs("div",{className:`p-6 rounded-2xl ${c?"border border-white/20":"bg-blue-50"}`,children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(W,{size:20})," ",r("schemes.documents")]}),e.jsx("ul",{className:"text-sm space-y-2",children:(L()||[]).map((i,t)=>e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"ðŸ“„"})," ",i]},t))})]}),e.jsx("button",{onClick:()=>g(`/schemes/${m}/apply`),className:"w-full py-4 rounded-xl font-black text-xl shadow-lg transition-transform active:scale-95 bg-blue-600 text-white hover:bg-blue-700",children:r("schemes.apply_now")})]})]})]})]})})};export{Z as SchemeDetailsPage};
