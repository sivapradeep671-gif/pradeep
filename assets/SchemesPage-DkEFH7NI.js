import{c as A,a as S,r as c,j as e,E as T,A as L,m as v,C as z}from"./index-CVOoTMyE.js";import{S as E}from"./shield-check-BSebOn0C.js";import{S as $,R as I,W as M}from"./wand-sparkles-BhTqIe1v.js";import{C as _}from"./chevron-right-qdDBrX7z.js";import{S as y}from"./search-_aX63oiP.js";import{L as O}from"./loader-circle-CVESfS4d.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],P=A("chevron-left",F);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],R=A("funnel",W),D=({scheme:s})=>{const{highContrast:l,fontSize:d,language:m}=S(),[r,h]=c.useState(null),[i,p]=c.useState(!1),g=async()=>{if(r){h(null);return}p(!0);try{const o=await(await fetch("/api/ai/simplify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:s.description,language:m||"en"})})).json();o.success&&o.result&&h(o.result)}catch(n){console.error("Simplification failed",n)}finally{p(!1)}},b=()=>{const n=[];return s.eligibility&&(s.eligibility.minAge&&n.push(`Age: ${s.eligibility.minAge}+`),s.eligibility.incomeLimit&&n.push(`Income < ₹${s.eligibility.incomeLimit}`),s.eligibility.disabilityTypes&&s.eligibility.disabilityTypes.length>0&&n.push(s.eligibility.disabilityTypes.join(", "))),n};return e.jsxs("div",{className:`p-6 rounded-3xl border-2 flex flex-col h-full transition-all hover:shadow-xl ${l?"bg-gray-900 border-yellow-400":"bg-white border-blue-50 shadow-sm hover:border-blue-200"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider ${l?"bg-yellow-400 text-black":"bg-blue-100 text-blue-700"}`,children:s.category}),s.department&&e.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold text-orange-600",children:[e.jsx(E,{className:"w-3 h-3"})," ",s.department]}),s.matchScore!==void 0&&e.jsxs("div",{className:"flex items-center gap-1 bg-green-500 text-white px-2 py-0.5 rounded-full text-[10px] font-black",children:[e.jsx($,{className:"w-3 h-3"})," ",s.matchScore,"% Match"]})]}),e.jsx("h3",{className:`font-bold mb-3 leading-tight flex-1 ${d==="large"?"text-2xl":"text-xl"}`,children:s.title}),e.jsxs("div",{className:`relative mb-6 rounded-xl p-4 transition-colors ${r?l?"bg-gray-800 border border-green-400":"bg-green-50 border border-green-200":""}`,children:[e.jsx("p",{className:`text-sm leading-relaxed ${l?"text-gray-300":"text-gray-600"}`,children:r||s.description}),r&&e.jsxs("div",{className:"absolute -top-3 right-4 px-2 py-0.5 bg-green-100 text-green-700 text-[10px] font-bold rounded-full border border-green-200 flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3"})," AI Simplified"]})]}),e.jsxs("div",{className:`mt-auto pt-6 border-t ${l?"border-gray-800":"border-gray-100"}`,children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:b().slice(0,3).map((n,o)=>e.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-md ${l?"bg-gray-800 text-yellow-200":"bg-gray-100 text-gray-600"}`,children:["• ",n]},o))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:g,className:`flex-1 py-3 rounded-xl font-bold text-xs flex items-center justify-center gap-2 transition-all ${i?"opacity-70 cursor-wait":""} ${l?"bg-gray-800 text-yellow-400 border border-yellow-400":"bg-purple-100 text-purple-700 hover:bg-purple-200"}`,"aria-label":r?"Show Original Text":"Simplify Text with AI",children:i?e.jsx(I,{className:"w-4 h-4 animate-spin"}):r?"Show Original":e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4"})," Simplify"]})}),e.jsx("a",{href:s.officialUrl||"#",target:"_blank",rel:"noopener noreferrer",className:`p-3 rounded-xl border-2 transition-all ${l?"border-yellow-400 text-yellow-400 hover:bg-yellow-400 hover:text-black":"border-blue-100 text-blue-600 hover:bg-blue-50"}`,"aria-label":`Apply for ${s.title} (Opens in new tab)`,children:e.jsx(T,{className:"w-4 h-4"})})]})]})]})},B=({onResults:s})=>{const{highContrast:l}=S(),[d,m]=c.useState(1),[r,h]=c.useState(!1),[i,p]=c.useState({age:25,gender:"Male",disabilityType:"Locomotor",income:5e4,need:"Financial Aid"}),g=3,b=()=>m(t=>Math.min(t+1,g)),n=()=>m(t=>Math.max(t-1,1)),o=async()=>{h(!0);try{const u=await(await fetch("/api/schemes/match",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:i})})).json();u.success&&s(u.results)}catch(t){console.error("Wizard Error",t)}finally{h(!1)}},x=(t,u)=>{p(j=>({...j,[t]:u}))},f=l?"bg-gray-900 border-yellow-400 text-white":"bg-white border-blue-100 text-gray-900 shadow-xl";return e.jsxs("div",{className:`rounded-3xl border-2 p-8 max-w-2xl mx-auto mb-12 ${f}`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-8","aria-label":`Step ${d} of ${g}`,children:[1,2,3].map(t=>e.jsx("div",{className:`h-2 flex-1 rounded-full transition-all ${t<=d?l?"bg-yellow-400":"bg-blue-600":"bg-gray-200"}`},t))}),e.jsx("div",{className:"min-h-[300px]",children:e.jsxs(L,{mode:"wait",children:[d===1&&e.jsxs(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Basic Details"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2",children:"My Age"}),e.jsx("input",{type:"number",value:i.age,onChange:t=>x("age",Number(t.target.value)),className:"w-full p-4 rounded-xl border-2 bg-transparent text-xl font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2",children:"Gender"}),e.jsx("div",{className:"flex gap-4",children:["Male","Female","Other"].map(t=>e.jsx("button",{onClick:()=>x("gender",t),className:`flex-1 py-3 rounded-xl font-bold border-2 transition-all ${i.gender===t?"bg-blue-600 border-blue-600 text-white":"border-gray-200 hover:border-blue-300"}`,children:t},t))})]})]})]},"step1"),d===2&&e.jsxs(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Disability Profile"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2",children:"Disability Type"}),e.jsx("select",{value:i.disabilityType,onChange:t=>x("disabilityType",t.target.value),className:"w-full p-4 rounded-xl border-2 bg-transparent text-lg font-bold",children:["Locomotor","Visual","Hearing","Intellectual","Multiple","Other"].map(t=>e.jsx("option",{value:t,className:"text-black",children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2",children:"Annual Income (₹)"}),e.jsx("input",{type:"number",value:i.income,onChange:t=>x("income",Number(t.target.value)),className:"w-full p-4 rounded-xl border-2 bg-transparent text-xl font-bold"}),e.jsx("p",{className:"text-xs mt-2 opacity-70",children:"Enter 0 if unemployed"})]})]})]},"step2"),d===3&&e.jsxs(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"What do you need?"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["Education / Scholarship","Pension / Income","Assistive Devices","Jobs / Skill","Transport","Marriage Grant"].map(t=>e.jsxs("button",{onClick:()=>x("need",t),className:`p-4 rounded-xl font-bold border-2 text-left transition-all ${i.need===t?"bg-green-600 border-green-600 text-white":"border-gray-200 hover:border-green-300"}`,children:[i.need===t&&e.jsx(z,{size:16,className:"inline mr-2"}),t]},t))})]},"step3")]})}),e.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200/20",children:[d>1?e.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-6 py-3 rounded-xl font-bold hover:bg-gray-100 dark:hover:bg-gray-800 transition",children:[e.jsx(P,{})," Back"]}):e.jsx("button",{className:"invisible",children:"Back"}),d<g?e.jsxs("button",{onClick:b,className:`flex items-center gap-2 px-8 py-3 rounded-xl font-bold transition shadow-lg ${l?"bg-yellow-400 text-black":"bg-blue-600 text-white hover:bg-blue-700"}`,children:["Next ",e.jsx(_,{})]}):e.jsxs("button",{onClick:o,disabled:r,className:`flex items-center gap-2 px-8 py-3 rounded-xl font-bold transition shadow-lg ${l?"bg-green-400 text-black":"bg-green-600 text-white hover:bg-green-700"}`,children:[r?"Matching...":"Find My Schemes"," ",e.jsx(y,{size:18})]})]})]})},V=()=>{const{highContrast:s,t:l,language:d}=S(),[m,r]=c.useState([]),[h,i]=c.useState(!0),[p,g]=c.useState(""),[b,n]=c.useState("All"),[o,x]=c.useState(!1);c.useEffect(()=>{f()},[]);const f=async(a="")=>{i(!0);try{const N=a?`/api/schemes/search?q=${encodeURIComponent(a)}`:"/api/schemes/search?q=",w=await fetch(N);if(!w.ok){console.error(`API Error: ${w.status}`),r([]);return}const C=await w.json();C.success&&r(C.results)}catch(N){console.error("Failed to fetch schemes",N)}finally{i(!1)}},t=a=>{a.preventDefault(),f(p)},u=a=>{r(a),x(!1)},j=["All","Social Security","Identity","Education","Health","Livelihood","Accessibility"],k=b==="All"?m:m.filter(a=>a.category&&a.category.includes(b)||a.tags&&a.tags.includes(b));return e.jsx("div",{className:`min-h-screen p-6 ${s?"bg-black text-yellow-400":"bg-gray-50 text-gray-900"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("header",{className:"mb-10 flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-black mb-4 flex items-center gap-3 uppercase tracking-tight",children:[e.jsx(y,{className:"w-10 h-10"})," ",l("schemes.title")]}),e.jsx("p",{className:"text-xl opacity-80 max-w-2xl",children:l("schemes.subtitle")})]}),e.jsx("button",{onClick:()=>x(!o),className:`px-6 py-3 rounded-xl font-bold border-2 transition-all ${o?"bg-red-100 border-red-200 text-red-600":"bg-green-100 border-green-200 text-green-700 animate-pulse"}`,children:o?l("schemes.close_wizard"):`✨ ${l("schemes.start_wizard")}`})]}),o&&e.jsx("div",{className:"mb-16 animate-in slide-in-from-top-10 fade-in duration-500",children:e.jsx(B,{onResults:u})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-10",children:[e.jsxs("form",{onSubmit:t,className:"flex-1 relative",children:[e.jsx("input",{type:"text",placeholder:l("schemes.search_placeholder"),value:p,onChange:a=>g(a.target.value),className:`w-full p-4 pl-12 rounded-2xl border-2 transition-all ${s?"bg-black border-yellow-400 text-white":"bg-white border-blue-100 shadow-sm focus:border-blue-500 outline-none"}`,"aria-label":l("schemes.search_placeholder")}),e.jsx(y,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("button",{type:"submit",className:"hidden",children:l("common.search")})]}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 scrollbar-none",children:[e.jsx(R,{className:"w-5 h-5 mr-2 shrink-0"}),j.map(a=>e.jsx("button",{onClick:()=>n(a),className:`px-4 py-2 rounded-full whitespace-nowrap font-bold text-sm border-2 transition-all ${b===a?s?"bg-yellow-400 text-black border-yellow-400":"bg-blue-600 text-white border-blue-600":s?"bg-black border-gray-700 text-gray-400 hover:border-yellow-400":"bg-white border-gray-200 hover:border-blue-300"}`,children:a},a))]})]}),h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[e.jsx(O,{className:"w-12 h-12 animate-spin text-blue-600"}),e.jsx("p",{className:"text-xl font-bold italic",children:l("schemes.scanning")})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[k.map(a=>e.jsx(D,{scheme:a},a.id)),k.length===0&&e.jsxs("div",{className:"col-span-full text-center py-20 opacity-50",children:[e.jsx(y,{className:"w-20 h-20 mx-auto mb-4"}),e.jsx("p",{className:"text-2xl font-bold",children:l("schemes.no_results")}),e.jsx("button",{onClick:()=>x(!0),className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg font-bold",children:l("schemes.try_wizard")})]})]})]})})};export{V as SchemesPage};
