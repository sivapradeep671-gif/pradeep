import{c as j,a as S,r as l,j as e}from"./index-CVOoTMyE.js";import{S as I}from"./search-_aX63oiP.js";import{C as f}from"./clock-aKMM2UDh.js";import{C}from"./circle-alert-D9kpPFLR.js";import{C as $}from"./circle-x-ay0iPRPY.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],D=j("circle-check",T);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],R=j("package",E),P=()=>{const{language:N,highContrast:s}=S(),[x,k]=l.useState(""),[b,w]=l.useState([]),[a,c]=l.useState(null),[p,o]=l.useState(!1),[u,d]=l.useState(""),i=localStorage.getItem("citizenId"),r={en:{title:"Track Status",desc:"View your application history or search by Tracking ID.",placeholder:"Enter ID (e.g. REQ-123)",searching:"Searching...",errNotFound:"ID Not Found",errSystem:"System Error",lblStatus:"Current Status",lblTrackId:"Your Tracking ID",historyTitle:"My Applications",noHistory:"No applications found."},ta:{title:"நிலையைக் கண்காணிக்கவும்",desc:"உங்கள் விண்ணப்ப வரலாற்றைப் பார்க்கவும் அல்லது ஐடி மூலம் தேடவும்.",placeholder:"ஐடியை உள்ளிடவும் (எ.கா. REQ-123)",searching:"தேடுகிறது...",errNotFound:"ஐடி கிடைக்கவில்லை",errSystem:"அமைப்பில் பிழை",lblStatus:"தற்போதைய நிலை",lblTrackId:"உங்கள் கண்காணிப்பு ஐடி",historyTitle:"எனது விண்ணப்பங்கள்",noHistory:"விண்ணப்பங்கள் எதுவும் இல்லை."}}[N==="ta"?"ta":"en"];l.useEffect(()=>{i&&v()},[i]);const v=async()=>{o(!0);try{const n=await(await fetch(`/api/complaints/citizen/${i}`)).json();n.success&&w(n.data)}catch(t){console.error("History Error:",t)}finally{o(!1)}},h=async(t=x)=>{if(t){d(""),c(null),o(!0);try{const y=await(await fetch(`/api/complaints/track/${t}`)).json();y.success?c(y.data):d(r.errNotFound)}catch{d(r.errSystem)}finally{o(!1)}}},m=t=>{switch(t){case"Resolved":return e.jsx(D,{className:"text-green-500"});case"Rejected":return e.jsx($,{className:"text-red-500"});case"In Progress":return e.jsx(f,{className:"text-blue-500"});default:return e.jsx(C,{className:"text-yellow-500"})}},g=t=>{if(s)return"text-yellow-400";switch(t){case"Resolved":return"text-green-600";case"Rejected":return"text-red-600";case"In Progress":return"text-blue-600";default:return"text-yellow-600"}};return e.jsx("div",{className:`min-h-screen py-32 px-4 ${s?"bg-black text-white":"bg-gray-50 text-gray-900"}`,children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-black mb-4 uppercase tracking-tight",children:r.title}),e.jsx("p",{className:"text-lg opacity-70",children:r.desc})]}),e.jsxs("div",{className:"flex gap-4 max-w-2xl mx-auto mb-16",children:[e.jsx("input",{type:"text",value:x,onChange:t=>k(t.target.value.toUpperCase()),className:`flex-1 p-5 rounded-3xl border-2 outline-none text-xl font-mono font-bold uppercase tracking-widest transition-all ${s?"bg-black border-yellow-400 text-white focus:border-white":"bg-white border-blue-100 shadow-lg focus:border-blue-500 placeholder:text-gray-300"}`,placeholder:r.placeholder,onKeyDown:t=>t.key==="Enter"&&h()}),e.jsxs("button",{onClick:()=>h(),disabled:p,className:`px-8 rounded-3xl transition-all hover:scale-105 active:scale-95 flex items-center gap-2 font-bold ${s?"bg-yellow-400 text-black":"bg-blue-600 text-white shadow-xl shadow-blue-500/20"}`,children:[p?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}):e.jsx(I,{size:24}),"Track"]})]}),u&&e.jsx("div",{className:"max-w-2xl mx-auto p-4 bg-red-50 text-red-600 rounded-2xl font-bold mb-8 text-center animate-shake",children:u}),a?e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("button",{onClick:()=>c(null),className:`mb-6 flex items-center gap-2 font-bold transition-opacity hover:opacity-70 ${s?"text-yellow-400":"text-blue-600"}`,children:"← Back to list"}),e.jsxs("div",{className:`p-8 rounded-[2rem] shadow-2xl border-4 ${s?"bg-gray-900 border-yellow-400":"bg-white border-blue-600"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("span",{className:`px-4 py-1 rounded-full text-xs font-black uppercase tracking-widest ${s?"bg-yellow-400 text-black":"bg-blue-100 text-blue-700"}`,children:a.category}),e.jsx("h2",{className:"text-3xl font-black mt-4",children:a.type})]}),e.jsxs("div",{className:"text-right text-gray-400",children:[e.jsx("p",{className:"text-xs font-bold uppercase",children:"Last Update"}),e.jsx("p",{className:"text-sm font-mono",children:new Date(a.updatedAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-6 mb-10 p-6 rounded-2xl bg-opacity-5 bg-gray-500 border-2 border-dashed border-gray-200",children:[e.jsx("div",{className:"p-4 rounded-full bg-white shadow-md",children:m(a.status)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase opacity-60",children:r.lblStatus}),e.jsx("h3",{className:`text-4xl font-black ${g(a.status)}`,children:a.status})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase opacity-60 mb-2",children:"Description"}),e.jsxs("p",{className:"text-lg font-medium italic",children:['"',a.description,'"']})]}),e.jsxs("div",{className:`p-6 rounded-2xl border-2 ${s?"border-yellow-400":"bg-gray-50 border-gray-100"}`,children:[e.jsx("p",{className:"text-xs font-bold uppercase opacity-60 mb-1",children:r.lblTrackId}),e.jsx("p",{className:"text-2xl font-mono font-black tracking-[0.2em]",children:a.trackingId})]})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-2xl font-black uppercase tracking-tight flex items-center gap-3",children:[e.jsx(f,{className:s?"text-yellow-400":"text-blue-600"}),r.historyTitle]}),b.length===0?e.jsxs("div",{className:`p-16 rounded-[2rem] border-2 border-dashed text-center ${s?"border-gray-800":"bg-white border-gray-200"}`,children:[e.jsx(R,{className:"mx-auto h-16 w-16 opacity-10 mb-4"}),e.jsx("p",{className:"text-xl font-bold opacity-30",children:r.noHistory})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:b.map(t=>e.jsxs("button",{onClick:()=>c(t),className:`p-6 rounded-3xl border-2 text-left transition-all hover:scale-[1.02] active:scale-95 flex flex-col justify-between ${s?"bg-gray-900 border-gray-800 hover:border-yellow-400":"bg-white border-blue-50 shadow-sm hover:shadow-xl hover:border-blue-200"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("span",{className:`text-[10px] font-black uppercase tracking-tighter px-2 py-0.5 rounded-full ${s?"bg-yellow-400 text-black":"bg-blue-100 text-blue-700"}`,children:t.category}),e.jsx("span",{className:"text-[10px] font-bold opacity-50",children:new Date(t.createdAt).toLocaleDateString()})]}),e.jsx("h3",{className:"text-xl font-black truncate mb-2",children:t.type}),e.jsxs("div",{className:"flex items-center gap-2",children:[m(t.status),e.jsx("span",{className:`text-sm font-bold ${g(t.status)}`,children:t.status})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-dashed border-gray-100 dark:border-gray-800",children:e.jsx("p",{className:"text-[10px] font-mono font-bold opacity-30 uppercase tracking-widest",children:t.trackingId})})]},t.trackingId))})]})]})})};export{P as TrackStatus};
